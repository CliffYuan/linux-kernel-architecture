<!DOCTYPE HTML>
<html>
<!-- <html> -->
<head>
  <title>内存地址|Linux Kernel Architecture 内核笔记</title>
  <meta charset="utf-8" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/feed.xml">
<link rel="icon" href="/images/icons/avatar.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/style/css/bootstrap.css" type="text/css" media="screen">
<link rel="stylesheet" href="/style/css/syntax.css" type="text/css" media="screen">
<script type="text/javascript" src="/style/jquery-1.7.1.min.js"></script>


<link rel="stylesheet" href="/style/style.css" type="text/css">

<script>
$(document).ready(function(){
    $('.nav a').hover(
        function(){
            $(this).animate({opacity: 0.3}, 400)
        }, 
        function(){
            $(this).animate({opacity: 1}, 400)
        });
});
function getURLParameter(name) {
    return decodeURI(
        (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
    );
}
</script>

<style>
.archive li {
    list-style: decimal;
    margin-left: 50px;
    line-height: 2em;
}

.archive .year {
    list-style: none;
}
</style>
  <script type="text/javascript">
        var BYB = {};
  </script>
  <script type="text/javascript">
    BYB.includeScript = function(file,callback){
    var _doc = document.getElementsByTagName('head')[0];
    var js = document.createElement('script');
    js.setAttribute('type', 'text/javascript');
    js.setAttribute('src', file);
    _doc.appendChild(js);
    
    if (!/*@cc_on!@*/0) { //if not IE
    //Firefox2、Firefox3、Safari3.1+、Opera9.6+ support js.onload
    js.onload = function () {
    callback();
    }
    } else {
    //IE6、IE7 support js.onreadystatechange
    js.onreadystatechange = function () {
    if (js.readyState == 'loaded' || js.readyState == 'complete') {
    callback();
    }
    }
    }
    return false;
    }
  </script>
  <meta content="linux kernel architecture 内核笔记 内存地址..." name="description"/>
  <meta content="内存寻址,逻辑地址,线性地址,物理地址,内存控制单元,MMU," name="keywords"/>
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://guojing.me/linux-kernel-architecture//posts/memory-address/" />
  <meta property="og:title" content="内存地址" />
  <meta property="og:description" content="linux kernel architecture 内核笔记 内存地址..." />
</head>
<body>

<div class="banner">
<ul class="nav nav-pills">
  <li><a href="/">daf94cf87</a></li>
  <!--
  I love bettylwx
    -->
</ul>
</div>

<div class="container">

<div class="main clearfix">
  <div class="title">内存地址</div>

  <div class="content 内存寻址_content_css">
    <p>现代的操作系统自身不必完全了解物理内存；如今的微处理器包含的硬件线路使得内存管理既高效又健壮，所以编程错误就不会对该程序之外的内存产生非法访问。</p>

<p>陈许愿偶尔会引用内存地址（<em>memory address</em>）作为访问单元内容的一种方式，但是，当使用80x86微处理器时，必须区分三种不同的地址：</p>

<h3 id="logical-address">逻辑地址（<em>logical address</em>）</h3>

<p>包含在机器语言指令中用来规定一个操作数或一条指令的地址。这种寻址方式在80x86著名的分段结构中表现的尤为具体，它促使MS-DOS或Windows程序员把程序分成若干段。每个逻辑地址都由一个段（<em>segment</em>）和偏移量（<em>offset</em>或<em>displacement</em>）组成，偏移量指明了从段开始的地方到实际地址之间的举例。</p>

<h3 id="linear-address">线性地址（<em>linear address</em>）</h3>

<p>线性地址也成虚拟地址（<em>virtual address</em>）。线性地址是一个32位无符号整数，可以用来表示高达4GB的地址，也就是，高达4294967296个内存单元。线性地址通常用十六进制数字表示，值的范围从0x00000000到0xffffffff。</p>

<h3 id="physical-address">物理地址（<em>physical address</em>）</h3>

<p>用于内存芯片级内存单元寻址。它们与从微处理器的地址引脚发送到内存总线上的电信号相对应。物理地址由32位或36位无符号整数表示。</p>

<h3 id="section">内存控制单元</h3>

<p>内存控制单元（<em>MMU</em>）通过一种称为分段单元（<em>segmentation unit</em>）的硬件电路把一个逻辑地址转换成线性地址；然后，第二个称为分页单元（<em>paging unit</em>）的硬件电路把线性地址转换成一个物理地址。</p>

<p class="center"><img src="/linux-kernel-architecture/images/mmu.png" alt="system" style="max-width:500px" /></p>

<p class="center">内存控制单元转换示意图</p>

<p>在多处理系统中，所有CPU都共享同一内存；这意味着RAM芯片可以由独立的CPU并发地访问。因为在RAM芯片上的读或写操作必须串行地执行，因此，一种所谓的内存仲裁器（<em>memory arbiter</em>）的硬件电路插在总线和每个RAM芯片之间。</p>

<p>内存仲裁器的作用是如果某个RAM芯片空闲，就准予一个CPU访问，如果该芯片忙于为另一个处理器提出的请求服务，就延迟这个CPU的访问。即使在单处理器上也使用内存仲裁器，因为单处理器系统中包含一个叫做DMA控制器的特殊处理器。而DMA控制器与CPU并发操作。</p>

<p>在多处理器系统的情况下，因为仲裁器有多个输入端口，所以其结构更加复杂。例如，双Pentium在每个芯片的入口维持一个两端口仲裁器，并在试图使用公用总线前请求两个CPU交换同步信息。但是从编程的角度来看，因为仲裁器由硬件电路管理，因此它是隐藏的。</p>

<h3 id="section-1">硬件中的分段</h3>

<p>从80286模型开始，Intel微处理以两种不同的方式执行地址转换，这两种方式分别为实模式（<em>real mode</em>）和保护模式（<em>protected mode</em>）。现在主要讨论保护模式下的地址转换，实模式的存在主要原因是要维持处理器与早起模型兼容，并让操作系统自举。</p>

  </div>

  <hr>
  <div class="eof">EOF</div>
  <hr>

  <div class="forb">
  
  <a href="http://guojing.me/linux-kernel-architecture/tags/#内存寻址">#内存寻址</a>
  
  <a href="http://guojing.me/linux-kernel-architecture/tags/#逻辑地址">#逻辑地址</a>
  
  <a href="http://guojing.me/linux-kernel-architecture/tags/#线性地址">#线性地址</a>
  
  <a href="http://guojing.me/linux-kernel-architecture/tags/#物理地址">#物理地址</a>
  
  <a href="http://guojing.me/linux-kernel-architecture/tags/#内存控制单元">#内存控制单元</a>
  
  <a href="http://guojing.me/linux-kernel-architecture/tags/#MMU">#MMU</a>
  
  </div>

  <div class="suggest">
    
        <a href="http://guojing.me/linux-kernel-architecture/posts/process-switch/" class="pre">&lt; 进程切换</a>
    
    
    
        <a href="http://guojing.me/linux-kernel-architecture/posts/segment-selector/" class="next">段选择符和段寄存器 &gt;</a>
    
    </div>
</div>

<!--
<div class="comments 内存寻址_comments_css">
<div id="disqus_container"> 
    
    <a href="#" class="comment" onclick="return false;">点击评论或查看评论。</a>
        
    <div id="disqus_thread"></div>
</div>
</div>
-->

<script type="text/javascript">
    $(document).ready(function(){
        $('#disqus_container .comment').on('click',function(){
            $(this).html('加载中...');
    var disqus_shortname = 'jguoer';
            var that = this;
            BYB.includeScript('http://' + disqus_shortname + '.disqus.com/embed.js',function(){$(that).remove()});
        });
});
</script>

<!--
  Copryright GuoJing 未经允许，严禁直接从Github上转载我的文章，所有文章遵循CC协议，允许复制和转载，但需要保留原作者链接。
  该文章内存地址写于2014年04月13日。
-->

</div>
<div class="footer">
<!--
    Copyright GuoJing, Theme designed by GuoJing
    Theme name Simple
    If you love this theme, please keep my copyright and link to my blog.
    If you DON'T LIKE it and you CAN remove the link. but not share spirit.
    如果你喜欢这个博客构架和皮肤，请保留我作为原作者的权利，我会感谢你。
    你也可以不保留我作为原作者的权利，自然没有任何问题，但似乎没有共享精神。
-->
<!-- © Copryright by<a href="http://guojing.me/" target="_blank">GuoJing</a> 2012-2014 using <a href="http://www.github.com/" target="_blank">GitHub</a> and <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42721249-1', 'guojing.me');
  ga('send', 'pageview');

</script>
</div>

</body>
</html>
