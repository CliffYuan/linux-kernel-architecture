<!DOCTYPE HTML>
<html>
<!-- <html> -->
<head>
  <title>进程优先级|Linux Kernel Architecture 内核笔记</title>
  <meta charset="utf-8" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/feed.xml">
<link rel="icon" href="/images/icons/avatar.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/style/css/bootstrap.css" type="text/css" media="screen">
<link rel="stylesheet" href="/style/css/syntax.css" type="text/css" media="screen">
<script type="text/javascript" src="/style/jquery-1.7.1.min.js"></script>


<link rel="stylesheet" href="/style/style.css" type="text/css">

<script>
$(document).ready(function(){
    $('.nav a').hover(
        function(){
            $(this).animate({opacity: 0.3}, 400)
        }, 
        function(){
            $(this).animate({opacity: 1}, 400)
        });
});
function getURLParameter(name) {
    return decodeURI(
        (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
    );
}
</script>

<style>
.archive li {
    list-style: decimal;
    margin-left: 50px;
    line-height: 2em;
}

.archive .year {
    list-style: none;
}
</style>
  <script type="text/javascript">
        var BYB = {};
  </script>
  <script type="text/javascript">
    BYB.includeScript = function(file,callback){
    var _doc = document.getElementsByTagName('head')[0];
    var js = document.createElement('script');
    js.setAttribute('type', 'text/javascript');
    js.setAttribute('src', file);
    _doc.appendChild(js);
    
    if (!/*@cc_on!@*/0) { //if not IE
    //Firefox2、Firefox3、Safari3.1+、Opera9.6+ support js.onload
    js.onload = function () {
    callback();
    }
    } else {
    //IE6、IE7 support js.onreadystatechange
    js.onreadystatechange = function () {
    if (js.readyState == 'loaded' || js.readyState == 'complete') {
    callback();
    }
    }
    }
    return false;
    }
  </script>
  <meta content="linux kernel architecture 内核笔记 进程优先级..." name="description"/>
  <meta content="优先级," name="keywords"/>
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://guojing.me/linux-kernel-architecture//posts/process-priority/" />
  <meta property="og:title" content="进程优先级" />
  <meta property="og:description" content="linux kernel architecture 内核笔记 进程优先级..." />
</head>
<body>

<div class="banner">
<ul class="nav nav-pills">
  <li><a href="/">Home</a></li>
  <li><a href="/archive/">Archive</a></li>
  <li><a href="/linux-kernel-architecture/archive/">Kernel</a></li>
</ul>

</div>

<div class="container">

<div class="main clearfix">
  <div class="title">进程优先级</div>

  <div class="content process进程_content_css">
    <p>并非所有的进程都具有相同的重要性，除了一般所熟悉的进程优先级之外，进程还有不同的关键度类别，以满足不同的需求，如果比较粗糙的划分的话，进程可以分为<em>实时进程</em>和<em>非实时进程</em>。</p>

<h3 id="section">硬实时进程</h3>

<p>硬实时进程有严格的时间限制，必须尽快的处理发送，即必须保证在一定的时间内完成。例如飞机处于着陆状态，而飞行员想要拉起机头，但是计算机要几秒才能响应，这什么用也没有，因为这样飞机只可能坠毁。硬实时进程的关键特征是，它必须在可保证的时间范围内得到处理。这并不意味着所要求的时间范围特别短，而是系统必须保证绝不会超过某一时间范围，即使在不大可能或者条件不利的情况下也是如此。</p>

<p>主流内核的Linux不支持硬实时进程，但有一些修改版本如RTLinux、Xenomai、RATI提供了该特征。在这些修改后的方案中，Linux内核作为独立的『进程』运行来处理次重要的软件，而实时的工作则在内核外部完成。只有当没有实时的关键操作执行时，内核才会运行。</p>

<h3 id="section-1">软实时进程</h3>

<p>软实时进程是硬实时进程的一种弱化形式。尽管仍然需要快速的响应和完成，但稍微晚一点不会有什么问题，例如对CD的写入操作。CD写入进程接收的数据必须保持某一速率，因为数据是以连续流的形式写入介质。如果系统负荷过高，则可能导致数据写入中断，导致CD不可用。但相比之下，这并不会有什么大问题<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>。</p>

<h3 id="section-2">普通进程</h3>

<p>大多数进程都是没有特定约束的普通进程，但仍然可以根据重要性来分配优先级。例如冗长的编译或计算工作只需要低优先级，比如中断一两秒不会有什么问题。而对于用户界面而言，却需要高优先级。因为前者用户可能不会注意到什么，后者用户能很明显的感知，因此可能会很愤怒。</p>

<p>进程的运行按时间片调度，分配给进程的时间份额与其相对重要性相当。如果进程优先级高，则可能获取较多的CPU时间，反之则获取较少的CPU时间。可以模拟成下图：</p>

<p class="center"><img src="/linux-kernel-architecture/images/process-pri.png" alt="system" style="max-width:500px" /></p>

<p class="center">进程调度</p>

<p>系统中的时间流动对应圆盘的转动，CPU则类似于扫描器，最后的效果是，尽管所有的进程都有机会运行，但重要的进程会比次要的得到更多的CPU时间。这种方案称之为抢占式多任务处理（<em>preemptive multitasking</em>），各个进程都分配到一定的时间段上执行。所有的CPU寄存器的内容和页表，在转换时都会保存起来。</p>

<p>这种简化的模型没有考虑的几个问题，例如，进程在某些时间可能因为无事可做而无法立即执行。为使CPU时间的利益回报尽可能最大化，这样的进程坚决不能执行。在上图中看不出来，因为其中假定所有的进程都是可以立即执行的。另外一个忽略的事实是Linux支持不同的调度类别<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup>，调度时也必须考虑到这一点。此外在有重要的进程变为就绪状态可以运行时，有一种选项是抢占当前进程，图中也没有反映出这一点。</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>当然实时进程需要的CPU时间应该能得到保证，并不会被其他进程中断。 <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>进程之间完全公平的调度和实时调度。 <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

  </div>

  <div class="forb">
  
  <a href="http://guojing.me/linux-kernel-architecture/tags/#优先级">#优先级</a>
  
  </div>

  <div class="suggest">
    
        <a href="http://guojing.me/linux-kernel-architecture/posts/process-descriptor/" class="pre">&lt; 进程描述符</a>
    
    
    
        <a href="http://guojing.me/linux-kernel-architecture/posts/process-life/" class="next">进程生命周期 &gt;</a>
    
    </div>
</div>

<!--
<div class="comments process进程_comments_css">
<div id="disqus_container"> 
    
    <a href="#" class="comment" onclick="return false;">点击评论或查看评论。</a>
        
    <div id="disqus_thread"></div>
</div>
</div>
-->

<script type="text/javascript">
    $(document).ready(function(){
        $('#disqus_container .comment').on('click',function(){
            $(this).html('加载中...');
    var disqus_shortname = 'jguoer';
            var that = this;
            BYB.includeScript('http://' + disqus_shortname + '.disqus.com/embed.js',function(){$(that).remove()});
        });
});
</script>

<!--
  Copryright GuoJing 未经允许，严禁直接从Github上转载我的文章，所有文章遵循CC协议，允许复制和转载，但需要保留原作者链接。
  该文章进程优先级写于2014年04月01日。
-->

</div>
<div class="footer">
<!--
    Copyright GuoJing, Theme designed by GuoJing
    Theme name Simple
    If you love this theme, please keep my copyright and link to my blog.
    If you DON'T LIKE it and you CAN remove the link. but not share spirit.
    如果你喜欢这个博客构架和皮肤，请保留我作为原作者的权利，我会感谢你。
    你也可以不保留我作为原作者的权利，自然没有任何问题，但似乎没有共享精神。
-->
<!-- © Copryright by<a href="http://guojing.me/" target="_blank">GuoJing</a> 2012-2014 using <a href="http://www.github.com/" target="_blank">GitHub</a> and <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> -->
<div class="author">
    <div class="icon">
        <img src="/images/authors/guojing.jpg" alt="me"/>
    </div>
    <div class="name">
        <a href="/about">GuoJing</a>
    </div>
    <div class="description">
        Linux Kernel Architecture 内核笔记
    </div>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42721249-1', 'guojing.me');
  ga('send', 'pageview');

</script>
</div>

</body>
</html>
