<!DOCTYPE HTML>
<html>
<!-- <html> -->
<head>
  <title>VFS相关的系统调用|Linux Kernel Architecture 内核笔记</title>
  <meta charset="utf-8" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/feed.xml">
<link rel="icon" href="/images/icons/avatar.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/style/css/bootstrap.css" type="text/css" media="screen">
<link rel="stylesheet" href="/style/css/syntax.css" type="text/css" media="screen">
<script type="text/javascript" src="/style/jquery-1.7.1.min.js"></script>


<link rel="stylesheet" href="/style/style.css" type="text/css">

<script>
$(document).ready(function(){
    $('.nav a').hover(
        function(){
            $(this).animate({opacity: 0.3}, 400)
        }, 
        function(){
            $(this).animate({opacity: 1}, 400)
        });
});
function getURLParameter(name) {
    return decodeURI(
        (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
    );
}
</script>

<style>
.archive li {
    list-style: decimal;
    margin-left: 50px;
    line-height: 2em;
}

.archive .year {
    list-style: none;
}
</style>
  <script type="text/javascript">
        var BYB = {};
  </script>
  <script type="text/javascript">
    BYB.includeScript = function(file,callback){
    var _doc = document.getElementsByTagName('head')[0];
    var js = document.createElement('script');
    js.setAttribute('type', 'text/javascript');
    js.setAttribute('src', file);
    _doc.appendChild(js);
    
    if (!/*@cc_on!@*/0) { //if not IE
    //Firefox2、Firefox3、Safari3.1+、Opera9.6+ support js.onload
    js.onload = function () {
    callback();
    }
    } else {
    //IE6、IE7 support js.onreadystatechange
    js.onreadystatechange = function () {
    if (js.readyState == 'loaded' || js.readyState == 'complete') {
    callback();
    }
    }
    }
    return false;
    }
  </script>
  <meta content="linux kernel architecture 内核笔记 VFS相关的系统调用..." name="description"/>
  <meta content="系统调用,VFS," name="keywords"/>
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://guojing.me/linux-kernel-architecture//posts/vfs-system-interfaces/" />
  <meta property="og:title" content="VFS相关的系统调用" />
  <meta property="og:description" content="linux kernel architecture 内核笔记 VFS相关的系统调用..." />
</head>
<body>

<div class="banner">
<ul class="nav nav-pills">
  <li><a href="/">Home</a></li>
  <li><a href="/archive/">Archive</a></li>
  <li><a href="/linux-kernel-architecture/archive/">Kernel</a></li>
</ul>

</div>

<div class="container">

<div class="main clearfix">
  <div class="title">VFS相关的系统调用</div>

  <div class="content 虚拟文件系统_content_css">
    <p>VFS提供了诸多的接口以便可以简单的调用，这些系统调用涉及文件系统、普通文件、目录文件以及符号链接文件。另外还有少数几个由VFS处理的其他系统调用例如<em>ioperm()</em>，<em>ioctl()</em>、<em>pipe()</em>等。</p>

<table>
  <thead>
    <tr>
      <th>系统调用名</th>
      <th>说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>mount() umonut() umount2()</td>
      <td>安装/卸载文件系统</td>
    </tr>
    <tr>
      <td>sysfs()</td>
      <td>获取文件系统信息</td>
    </tr>
    <tr>
      <td>statfs() fstatfs() statfs64() fstatfs64()</td>
      <td>获取文件系统统计信息</td>
    </tr>
    <tr>
      <td>ustat() chroot() pivot_root()</td>
      <td>更改根目录</td>
    </tr>
    <tr>
      <td>chdir() fchdir() getcwd()</td>
      <td>对当前目录进行操作</td>
    </tr>
    <tr>
      <td>mkdir() rmdir()</td>
      <td>创建和删除目录操作</td>
    </tr>
    <tr>
      <td>get_dents() getdents64() readdir() link() unlink() rename() lookup_dcookie() readlink() symlink()</td>
      <td>对软连接进行操作</td>
    </tr>
    <tr>
      <td>chown() fchown() lchown() chown16() fchown16() lchown16()</td>
      <td>更改文件所有者性</td>
    </tr>
    <tr>
      <td>chmod() fchmod() utime()</td>
      <td>更改文件属性</td>
    </tr>
    <tr>
      <td>stat() fstat() lstat() access() oldstat() oldfstat() oldlstat() stat64() lstat64() fstat64()</td>
      <td>获取文件状态</td>
    </tr>
    <tr>
      <td>open() close() creat() umask()</td>
      <td>打开关闭创建文件操作</td>
    </tr>
    <tr>
      <td>dup() dup2() fcntl() fcntl64()</td>
      <td>对文件描述符进行操作</td>
    </tr>
    <tr>
      <td>select() poll()</td>
      <td>等待一组文件描述符上发生的事件</td>
    </tr>
    <tr>
      <td>truncate() ftruncate() truncated64() ftruncate64()</td>
      <td>更改文件长度</td>
    </tr>
    <tr>
      <td>lseek() _llseek()</td>
      <td>更改文件指针</td>
    </tr>
    <tr>
      <td>read() write() readv() writev() sendfile() sendfile64) readahead()</td>
      <td>进行文件I/O操作</td>
    </tr>
    <tr>
      <td>io_setup() io_submit() io_getevents() io_cancel() io_destroy()</td>
      <td>异步I/O</td>
    </tr>
    <tr>
      <td>pread64() pwrite64()</td>
      <td>搜索并访问文件</td>
    </tr>
    <tr>
      <td>nmap() nmap2() munmap() madvise() mincore() remap_file_pages()</td>
      <td>处理文件内存映射</td>
    </tr>
    <tr>
      <td>fdatasync() fsync() sync() msync()</td>
      <td>同步文件处理</td>
    </tr>
    <tr>
      <td>flock()</td>
      <td>处理文件锁</td>
    </tr>
    <tr>
      <td>setxattr() lsetxattr() fsetxattr() getxattr() lgetxattr() fgetxattr() listxattr() llistxattr() flistxattr() removexattr() lremovexattr() fremovexattr()</td>
      <td>处理文件扩展属性</td>
    </tr>
  </tbody>
</table>

<p>虽然VFS是应用程序和具体文件系统之间的一层，不过，在某些情况下，一个文件操作可能由VFS本身去执行，无需调用低层函数。</p>

<p>例如，当某个进程关闭一个打开的文件时，并不需要涉及磁盘上的相应文件，因此VFS只需释放对应的文件对象。</p>

<p>同样，当系统调用<em>lseek()</em>修改一个文件指针，而这个文件指针是打开文件与进程交互所涉及的一个属性时，VFS就只需修改对应的文件对象，而不必访问磁盘上的文件，因此，无需调用具体文件系统的函数，所以可以把VFS看成『通用』文件系统，它在必要时才需要依赖某种具体的文件系统。</p>

  </div>

  <div class="forb">
  
  <a href="http://guojing.me/linux-kernel-architecture/tags/#系统调用">#系统调用</a>
  
  <a href="http://guojing.me/linux-kernel-architecture/tags/#VFS">#VFS</a>
  
  </div>

  <div class="suggest">
    
        <a href="http://guojing.me/linux-kernel-architecture/posts/create-slab/" class="pre">&lt; slab创建</a>
    
    
    
        <a href="http://guojing.me/linux-kernel-architecture/posts/work-queue/" class="next">工作队列 &gt;</a>
    
    </div>
</div>

<!--
<div class="comments 虚拟文件系统_comments_css">
<div id="disqus_container"> 
    
    <a href="#" class="comment" onclick="return false;">点击评论或查看评论。</a>
        
    <div id="disqus_thread"></div>
</div>
</div>
-->

<script type="text/javascript">
    $(document).ready(function(){
        $('#disqus_container .comment').on('click',function(){
            $(this).html('加载中...');
    var disqus_shortname = 'jguoer';
            var that = this;
            BYB.includeScript('http://' + disqus_shortname + '.disqus.com/embed.js',function(){$(that).remove()});
        });
});
</script>

<!--
  Copryright GuoJing 未经允许，严禁直接从Github上转载我的文章，所有文章遵循CC协议，允许复制和转载，但需要保留原作者链接。
  该文章VFS相关的系统调用写于2014年05月12日。
-->

</div>
<div class="footer">
<!--
    Copyright GuoJing, Theme designed by GuoJing
    Theme name Simple
    If you love this theme, please keep my copyright and link to my blog.
    If you DON'T LIKE it and you CAN remove the link. but not share spirit.
    如果你喜欢这个博客构架和皮肤，请保留我作为原作者的权利，我会感谢你。
    你也可以不保留我作为原作者的权利，自然没有任何问题，但似乎没有共享精神。
-->
<!-- © Copryright by<a href="http://guojing.me/" target="_blank">GuoJing</a> 2012-2014 using <a href="http://www.github.com/" target="_blank">GitHub</a> and <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> -->
<div class="author">
    <div class="icon">
        <img src="/images/authors/guojing.jpg" alt="me"/>
    </div>
    <div class="name">
        <a href="/about">GuoJing</a>
    </div>
    <div class="description">
        Linux Kernel Architecture 内核笔记
    </div>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42721249-1', 'guojing.me');
  ga('send', 'pageview');

</script>
</div>

</body>
</html>
